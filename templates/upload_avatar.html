{% extends "base.html" %}

{% block title %}Загрузка аватара{% endblock %}

{% block styles %}
<style>
    .upload-container {
        max-width: 600px;
        margin: 30px auto;
        padding: 30px;
        background-color: #1e1e1e;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        text-align: center;
    }

    .avatar-preview {
        width: 200px;
        height: 200px;
        border-radius: 50%;
        border: 3px solid #6a5acd;
        margin: 20px auto;
        object-fit: cover;
        display: {% if not avatar_url %}none{% else %}block{% endif %};
    }

    .upload-btn {
        background-color: #6a5acd;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 20px;
        transition: background-color 0.3s;
    }

    .upload-btn:hover {
        background-color: #5a4acd;
    }

    .file-input {
        display: none;
    }

    .file-label {
        display: inline-block;
        padding: 10px 20px;
        background-color: #4CAF50;
        color: white;
        border-radius: 5px;
        cursor: pointer;
        margin-bottom: 20px;
    }

    .form-group {
        margin-bottom: 20px;
    }
</style>
{% endblock %}

{% block content %}
<div class="upload-container">
    <h1>Загрузите аватар</h1>

    {% if avatar_url %}
    <div class="form-group">
        <h3>Текущий аватар:</h3>
        <img src="{{ avatar_url }}" alt="Аватар" class="avatar-preview">
    </div>
    {% endif %}

    <form method="POST" action="{{ url_for('upload_avatar') }}" enctype="multipart/form-data">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>

        <label for="avatar" class="file-label">
            <i class="fas fa-camera"></i> Выбрать изображение
        </label>
        <input type="file" id="avatar" name="avatar" class="file-input" accept="image/*" required>

        <button type="submit" class="upload-btn">
            <i class="fas fa-upload"></i> Загрузить аватар
        </button>

        {% if error %}
        <div class="error-message" style="color: #ff6b6b; margin-top: 15px;">
            {{ error }}
        </div>
        {% endif %}
    </form>
</div>
{% endblock %}